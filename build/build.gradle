defaultTasks 'all'

def jshintConfig = 'build/jshint.json'
def srcDir = '.'

task jshint << {
	description = 'runs jshint on all non-test JS files'
	def jsPattern = ~/.*(?<!(raty|test).*)\.js/
	def jsFiles = [];
	new File(srcDir).eachFileRecurse {
		if (it.canonicalPath =~ jsPattern) {
	    	jsFiles << it.canonicalPath
		}
	}
	def command = "jshint ${jsFiles.join(' ')} --config ${jshintConfig}"
	println "executing ${command}"
	println command.execute().text
}

task all(dependsOn: ['jshint']) << {
	println "Done"
}